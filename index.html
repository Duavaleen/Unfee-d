<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Calculate how much platform fees are costing you. Compare fees across Gumroad, Kajabi, Patreon, Teachable, and more. Find better alternatives.">
    <meta name="keywords" content="platform fees, creator fees, gumroad fees, kajabi pricing, patreon fees, platform fee calculator, creator economy">
    <meta name="author" content="UnFee'd">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://unfeed.com/">
    <meta property="og:title" content="UnFee'd - Calculate Your Freedom from Platform Fees">
    <meta property="og:description" content="See exactly how much platform fees are stealing from you. Compare 16+ platforms and find better alternatives.">
    <meta property="og:image" content="https://unfeed.com/og-image.png">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://unfeed.com/">
    <meta name="twitter:title" content="UnFee'd - Calculate Your Freedom from Platform Fees">
    <meta name="twitter:description" content="See exactly how much platform fees are stealing from you. Compare 16+ platforms and find better alternatives.">
    <meta name="twitter:image" content="https://unfeed.com/og-image.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2300ff88;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23ff0080;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' fill='%230a0a0f'/%3E%3Ctext x='50' y='70' font-size='60' font-weight='800' text-anchor='middle' fill='url(%23grad)' font-family='Arial, sans-serif'%3EU%3C/text%3E%3C/svg%3E">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2300ff88;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23ff0080;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' fill='%230a0a0f'/%3E%3Ctext x='50' y='70' font-size='60' font-weight='800' text-anchor='middle' fill='url(%23grad)' font-family='Arial, sans-serif'%3EU%3C/text%3E%3C/svg%3E">
    
    <title>UnFee'd - Calculate Your Freedom</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- Google Analytics (replace G-XXXXXXXXXX with your tracking ID) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXXXXXX'); // Replace with your Google Analytics ID
    </script>
    
    <style>
        /* Full CSS embedded inline to avoid CORS issues */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-dark: #0a0a0f;
            --bg-card: #151520;
            --neon-green: #00ff88;
            --neon-pink: #ff0080;
            --text-primary: #ffffff;
            --text-muted: #8888aa;
            --border: #2a2a3f;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 20% 50%, rgba(0, 255, 136, 0.08) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(255, 0, 128, 0.08) 0%, transparent 50%);
            animation: drift 20s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes drift {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(10%, 10%); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            padding: 40px 0;
            border-bottom: 1px solid var(--border);
            backdrop-filter: blur(20px);
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(10, 10, 15, 0.8);
        }

        .logo {
            font-size: 32px;
            font-weight: 800;
            letter-spacing: -1px;
            background: linear-gradient(135deg, var(--neon-green), var(--neon-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: glow 3s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.3); }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .faq-question:hover {
            color: var(--neon-green);
        }

        .faq-item.active .faq-answer {
            display: block !important;
        }

        .faq-item.active .faq-toggle {
            transform: rotate(45deg);
        }

        .faq-toggle {
            transition: transform 0.3s ease;
        }

        a:hover {
            color: var(--neon-green) !important;
        }

        .hero {
            padding: 120px 0 80px;
            text-align: center;
        }

        h1 {
            font-size: clamp(48px, 8vw, 96px);
            font-weight: 800;
            line-height: 1;
            margin-bottom: 24px;
            letter-spacing: -2px;
        }

        .gradient-text {
            background: linear-gradient(135deg, #ffffff 0%, var(--neon-green) 50%, var(--neon-pink) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tagline {
            font-size: clamp(20px, 3vw, 28px);
            color: var(--text-muted);
            margin-bottom: 60px;
            font-weight: 400;
        }

        .calculator {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 60px;
            max-width: 800px;
            margin: 0 auto 80px;
            box-shadow: 0 20px 60px rgba(0, 255, 136, 0.1);
            position: relative;
            overflow: hidden;
        }

        .calculator::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 255, 136, 0.05) 0%, transparent 70%);
            animation: rotate 30s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .calculator-inner {
            position: relative;
            z-index: 1;
        }

        .form-group {
            margin-bottom: 32px;
        }

        label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            font-size: 16px;
            color: var(--text-primary);
        }

        input, select {
            width: 100%;
            padding: 16px 20px;
            background: var(--bg-dark);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 16px;
            font-family: 'Space Mono', monospace;
            transition: all 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--neon-green);
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.2);
        }

        input::placeholder {
            color: var(--text-muted);
        }

        .platform-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .platform-option {
            position: relative;
        }

        .platform-option input[type="checkbox"] {
            position: absolute;
            opacity: 0;
        }

        .platform-label {
            display: block;
            padding: 20px;
            background: var(--bg-dark);
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
        }

        .platform-option input[type="checkbox"]:checked + .platform-label {
            border-color: var(--neon-green);
            background: rgba(0, 255, 136, 0.1);
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.2);
        }

        .platform-label:hover {
            transform: translateY(-2px);
            border-color: var(--neon-pink);
        }

        .tier-selector {
            margin-top: 8px;
            padding: 8px 12px;
            background: rgba(0, 255, 136, 0.05);
            border: 1px solid var(--neon-green);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 14px;
            font-family: 'Outfit', sans-serif;
        }

        .tier-selector:focus {
            outline: none;
            border-color: var(--neon-green);
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
        }

        .cta-button {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, var(--neon-green), var(--neon-pink));
            border: none;
            border-radius: 12px;
            color: var(--bg-dark);
            font-size: 20px;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Outfit', sans-serif;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(0, 255, 136, 0.4);
        }

        .cta-button:active {
            transform: translateY(0);
        }

        .results {
            display: none;
            padding: 80px 0;
        }

        .results.active {
            display: block;
            animation: fadeIn 0.6s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .results-hero {
            text-align: center;
            margin-bottom: 60px;
        }

        .loss-amount {
            font-size: clamp(64px, 12vw, 120px);
            font-weight: 800;
            background: linear-gradient(135deg, var(--neon-pink), #ff4444);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            margin-bottom: 16px;
            font-family: 'Space Mono', monospace;
        }

        .loss-label {
            font-size: 24px;
            color: var(--text-muted);
            margin-bottom: 40px;
        }

        .share-actions {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 40px;
        }

        .share-button {
            padding: 12px 24px;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: var(--text-primary);
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Outfit', sans-serif;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .share-button:hover {
            transform: translateY(-2px);
            border-color: var(--neon-green);
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.2);
        }

        .share-button span {
            font-size: 20px;
        }

        #shareTwitter:hover {
            border-color: #1DA1F2;
            box-shadow: 0 0 20px rgba(29, 161, 242, 0.3);
        }

        #shareLinkedIn:hover {
            border-color: #0077b5;
            box-shadow: 0 0 20px rgba(0, 119, 181, 0.3);
        }

        #downloadPDF:hover {
            border-color: var(--neon-pink);
            box-shadow: 0 0 20px rgba(255, 0, 128, 0.3);
        }

        .breakdown {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 40px;
            margin-bottom: 40px;
        }

        .breakdown h3 {
            font-size: 24px;
            margin-bottom: 24px;
            color: var(--neon-green);
        }

        .fee-item {
            display: flex;
            justify-content: space-between;
            padding: 16px 0;
            border-bottom: 1px solid var(--border);
        }

        .fee-item:last-child {
            border-bottom: none;
        }

        .fee-platform {
            font-weight: 600;
        }

        .fee-amount {
            font-family: 'Space Mono', monospace;
            color: var(--neon-pink);
        }

        .recommendations {
            display: grid;
            gap: 24px;
        }

        .recommendation-card {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 24px;
            padding: 32px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .recommendation-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, var(--neon-green), var(--neon-pink));
        }

        .recommendation-card:hover {
            transform: translateY(-4px);
            border-color: var(--neon-green);
            box-shadow: 0 20px 60px rgba(0, 255, 136, 0.2);
        }

        .rec-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 20px;
        }

        .rec-name {
            font-size: 28px;
            font-weight: 800;
        }

        .savings-badge {
            background: rgba(0, 255, 136, 0.2);
            color: var(--neon-green);
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 14px;
            font-family: 'Space Mono', monospace;
        }

        .rec-details {
            color: var(--text-muted);
            margin-bottom: 20px;
            line-height: 1.8;
        }

        .rec-link {
            display: inline-block;
            padding: 12px 24px;
            background: rgba(0, 255, 136, 0.1);
            border: 2px solid var(--neon-green);
            border-radius: 8px;
            color: var(--neon-green);
            text-decoration: none;
            font-weight: 700;
            transition: all 0.3s ease;
        }

        .rec-link:hover {
            background: var(--neon-green);
            color: var(--bg-dark);
        }

        .email-capture {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 40px;
            text-align: center;
            margin-top: 60px;
        }

        .email-capture h3 {
            font-size: 28px;
            margin-bottom: 16px;
        }

        .email-capture p {
            color: var(--text-muted);
            margin-bottom: 24px;
        }

        .email-form {
            display: flex;
            gap: 16px;
            max-width: 500px;
            margin: 0 auto;
        }

        .email-form input {
            flex: 1;
        }

        .email-form button {
            padding: 16px 32px;
            background: var(--neon-green);
            border: none;
            border-radius: 8px;
            color: var(--bg-dark);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .email-form button:hover {
            background: var(--neon-pink);
        }

        footer {
            padding: 60px 0;
            border-top: 1px solid var(--border);
            text-align: center;
            color: var(--text-muted);
            margin-top: 120px;
        }

        #feeChart {
            max-height: 400px;
        }

            @media (max-width: 768px) {
            .calculator {
                padding: 32px 24px;
            }

            .platform-grid {
                grid-template-columns: 1fr;
            }

            .email-form {
                flex-direction: column;
            }

            .breakdown {
                padding: 24px;
            }

            .recommendation-card {
                padding: 24px;
            }

            #feeChart {
                max-height: 300px;
            }

            .breakdown div[style*="height: 400px"] {
                height: 300px !important;
            }

            .share-actions {
                flex-direction: column;
            }

            .share-button {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">UnFee'd</div>
        </div>
    </header>

    <main>
        <section class="hero">
            <div class="container">
                <h1>
                    <span class="gradient-text">Calculate</span><br>
                    Your Freedom
                </h1>
                <p class="tagline">See exactly how much platform fees are stealing from you</p>
            </div>
        </section>

        <section class="calculator-section">
            <div class="container">
                <div class="calculator">
                    <div class="calculator-inner">
                        <form id="feeCalculator">
                            <div class="form-group">
                                <label for="monthlyRevenue">Monthly Revenue ($)</label>
                                <input 
                                    type="number" 
                                    id="monthlyRevenue" 
                                    placeholder="5000"
                                    min="0"
                                    step="0.01"
                                    required
                                >
                            </div>

                            <div class="form-group">
                                <label>Which platforms do you currently use?</label>
                                <div class="platform-grid" id="platformGrid">
                                    <!-- Platform options will be generated by JavaScript -->
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="avgOrderValue">
                                    Average Transaction Value ($)
                                    <span style="font-size: 14px; color: var(--text-muted); font-weight: normal; display: block; margin-top: 4px;">
                                        Auto-calculated based on your platforms (you can edit this)
                                    </span>
                                </label>
                                <input 
                                    type="number" 
                                    id="avgOrderValue" 
                                    placeholder="Auto-calculated"
                                    min="0"
                                    step="0.01"
                                >
                            </div>

                            <button type="submit" class="cta-button">Find My Freedom Number</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <section class="results" id="results">
            <div class="container">
                <div class="results-hero">
                    <div class="loss-amount" id="lossAmount">$0</div>
                    <div class="loss-label">Lost to fees every year</div>
                    <div class="share-actions" id="shareActions" style="display: none; margin-top: 40px;">
                        <button class="share-button" id="shareTwitter" onclick="shareToTwitter()">
                            <span>üê¶</span> Share on Twitter
                        </button>
                        <button class="share-button" id="shareLinkedIn" onclick="shareToLinkedIn()">
                            <span>üíº</span> Share on LinkedIn
                        </button>
                        <button class="share-button" id="downloadPDF" onclick="downloadPDF()">
                            <span>üìÑ</span> Download PDF
                        </button>
                    </div>
                </div>

                <div class="breakdown">
                    <h3>üí∏ Fee Breakdown</h3>
                    <div id="feeBreakdown"></div>
                </div>

                <div class="breakdown" style="margin-top: 40px;">
                    <h3>üìä Visual Breakdown</h3>
                    <div style="position: relative; height: 400px; margin-top: 24px;">
                        <canvas id="feeChart"></canvas>
                    </div>
                </div>

                <h2 style="font-size: 36px; margin-bottom: 32px; text-align: center; margin-top: 60px;">
                    <span class="gradient-text">Better Alternatives</span>
                </h2>

                <div class="recommendations" id="recommendations"></div>

                <div class="email-capture">
                    <h3>Want this breakdown emailed to you?</h3>
                    <p>Get your personalized fee analysis + exclusive tips on cutting platform costs</p>
                    <form class="email-form" id="emailForm">
                        <input type="email" id="subscriberEmail" placeholder="your@email.com" required>
                        <button type="submit" id="submitEmail">
                            <span id="submitText">Send Report</span>
                            <span id="submitSpinner" style="display: none;">‚è≥</span>
                        </button>
                    </form>
                    <div id="emailMessage" style="margin-top: 16px; display: none;"></div>
                </div>
            </div>
        </section>
    </main>

    <section class="faq-section" style="padding: 80px 0; border-top: 1px solid var(--border);">
        <div class="container">
            <h2 style="font-size: 48px; text-align: center; margin-bottom: 60px;">
                <span class="gradient-text">Frequently Asked Questions</span>
            </h2>
            
            <div class="faq-container" style="max-width: 800px; margin: 0 auto;">
                <div class="faq-item" style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 24px; margin-bottom: 16px;">
                    <h3 class="faq-question" style="font-size: 20px; font-weight: 700; margin-bottom: 12px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
                        <span>How accurate are these fee calculations?</span>
                        <span class="faq-toggle" style="color: var(--neon-green); font-size: 24px;">+</span>
                    </h3>
                    <div class="faq-answer" style="display: none; color: var(--text-muted); line-height: 1.8; padding-top: 12px;">
                        Our calculations are based on official platform pricing as of 2024-2025. We include platform fees, transaction fees, and standard payment processing fees (2.9% + $0.30 per transaction). Actual fees may vary slightly based on your specific plan, transaction volume, and payment processor.
                    </div>
                </div>

                <div class="faq-item" style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 24px; margin-bottom: 16px;">
                    <h3 class="faq-question" style="font-size: 20px; font-weight: 700; margin-bottom: 12px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
                        <span>How do you calculate the average transaction value?</span>
                        <span class="faq-toggle" style="color: var(--neon-green); font-size: 24px;">+</span>
                    </h3>
                    <div class="faq-answer" style="display: none; color: var(--text-muted); line-height: 1.8; padding-top: 12px;">
                        We automatically estimate average transaction values based on the platforms you select. Course platforms (like Kajabi, Teachable) typically have higher transaction values ($100-150), while membership platforms (like Patreon, Substack) have lower recurring amounts ($10-30). The calculator averages these values when multiple platforms are selected.
                    </div>
                </div>

                <div class="faq-item" style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 24px; margin-bottom: 16px;">
                    <h3 class="faq-question" style="font-size: 20px; font-weight: 700; margin-bottom: 12px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
                        <span>Are the platform prices up to date?</span>
                        <span class="faq-toggle" style="color: var(--neon-green); font-size: 24px;">+</span>
                    </h3>
                    <div class="faq-answer" style="display: none; color: var(--text-muted); line-height: 1.8; padding-top: 12px;">
                        We regularly update platform pricing based on official sources. All pricing reflects current rates as of 2024-2025. Platform fees can change, so we recommend verifying directly with the platform for the most current pricing, especially for annual plans or special promotions.
                    </div>
                </div>

                <div class="faq-item" style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 24px; margin-bottom: 16px;">
                    <h3 class="faq-question" style="font-size: 20px; font-weight: 700; margin-bottom: 12px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
                        <span>Do you get paid for recommending alternatives?</span>
                        <span class="faq-toggle" style="color: var(--neon-green); font-size: 24px;">+</span>
                    </h3>
                    <div class="faq-answer" style="display: none; color: var(--text-muted); line-height: 1.8; padding-top: 12px;">
                        Some of the recommended platforms have affiliate programs, which means we may earn a commission if you sign up through our links. This doesn't affect our recommendations - we only suggest platforms that genuinely offer better value. Our goal is to help creators save money, regardless of affiliate relationships.
                    </div>
                </div>

                <div class="faq-item" style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 24px; margin-bottom: 16px;">
                    <h3 class="faq-question" style="font-size: 20px; font-weight: 700; margin-bottom: 12px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
                        <span>Can I use this for multiple platforms at once?</span>
                        <span class="faq-toggle" style="color: var(--neon-green); font-size: 24px;">+</span>
                    </h3>
                    <div class="faq-answer" style="display: none; color: var(--text-muted); line-height: 1.8; padding-top: 12px;">
                        Yes! You can select multiple platforms to see your total combined fees. The calculator will show you the breakdown for each platform and your total annual cost. This is especially useful if you're using different platforms for different products or revenue streams.
                    </div>
                </div>

                <div class="faq-item" style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 24px; margin-bottom: 16px;">
                    <h3 class="faq-question" style="font-size: 20px; font-weight: 700; margin-bottom: 12px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
                        <span>What if my platform isn't listed?</span>
                        <span class="faq-toggle" style="color: var(--neon-green); font-size: 24px;">+</span>
                    </h3>
                    <div class="faq-answer" style="display: none; color: var(--text-muted); line-height: 1.8; padding-top: 12px;">
                        We're constantly adding new platforms! If you don't see your platform, you can use "Stripe Only" as a baseline (just processing fees) or contact us to request a platform. We prioritize adding platforms that creators request most frequently.
                    </div>
                </div>

                <div class="faq-item" style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 24px; margin-bottom: 16px;">
                    <h3 class="faq-question" style="font-size: 20px; font-weight: 700; margin-bottom: 12px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
                        <span>Is my data saved or tracked?</span>
                        <span class="faq-toggle" style="color: var(--neon-green); font-size: 24px;">+</span>
                    </h3>
                    <div class="faq-answer" style="display: none; color: var(--text-muted); line-height: 1.8; padding-top: 12px;">
                        No! All calculations happen in your browser. We don't store your revenue numbers, platform selections, or personal information. The only data we collect is if you voluntarily subscribe to our email list (which uses Beehiiv). Your calculations are completely private and never leave your device.
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p style="margin-bottom: 20px;">UnFee'd - Break free from platform fees üöÄ</p>
            <div style="display: flex; justify-content: center; gap: 24px; flex-wrap: wrap; margin-top: 20px;">
                <a href="#privacy" onclick="showPrivacyPolicy(); return false;" style="color: var(--text-muted); text-decoration: none; transition: color 0.3s;">Privacy Policy</a>
                <span style="color: var(--text-muted);">‚Ä¢</span>
                <a href="#terms" onclick="showTerms(); return false;" style="color: var(--text-muted); text-decoration: none; transition: color 0.3s;">Terms of Use</a>
                <span style="color: var(--text-muted);">‚Ä¢</span>
                <a href="mailto:support@unfeed.com" style="color: var(--text-muted); text-decoration: none; transition: color 0.3s;">Contact</a>
            </div>
            <p style="margin-top: 20px; font-size: 14px; color: var(--text-muted);">¬© 2024 UnFee'd. All rights reserved.</p>
        </div>
    </footer>

    <!-- Privacy Policy Modal -->
    <div id="privacyModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 1000; overflow-y: auto;">
        <div style="max-width: 600px; margin: 40px auto; background: var(--bg-card); border: 2px solid var(--border); border-radius: 24px; padding: 40px; position: relative;">
            <button onclick="closeModal('privacyModal')" style="position: absolute; top: 20px; right: 20px; background: none; border: none; color: var(--text-primary); font-size: 32px; cursor: pointer; line-height: 1;">√ó</button>
            <h2 style="margin-bottom: 24px; color: var(--neon-green);">Privacy Policy</h2>
            <div style="color: var(--text-muted); line-height: 1.8;">
                <p><strong>Last Updated:</strong> 2024</p>
                <p><strong>Data Collection:</strong> UnFee'd does not collect, store, or track your revenue data or platform selections. All calculations happen locally in your browser.</p>
                <p><strong>Email Collection:</strong> If you subscribe to our email list, we collect your email address through Beehiiv. This is used solely to send you fee analysis reports and platform tips. You can unsubscribe at any time.</p>
                <p><strong>Analytics:</strong> We use analytics to understand how the tool is used (page views, feature usage). This data is anonymized and doesn't include personal information.</p>
                <p><strong>Third Parties:</strong> We use Beehiiv for email management and may use analytics services. These services have their own privacy policies.</p>
                <p><strong>Your Rights:</strong> You can request to see what data we have about you, request deletion, or opt out of email communications at any time.</p>
            </div>
        </div>
    </div>

    <!-- Terms Modal -->
    <div id="termsModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 1000; overflow-y: auto;">
        <div style="max-width: 600px; margin: 40px auto; background: var(--bg-card); border: 2px solid var(--border); border-radius: 24px; padding: 40px; position: relative;">
            <button onclick="closeModal('termsModal')" style="position: absolute; top: 20px; right: 20px; background: none; border: none; color: var(--text-primary); font-size: 32px; cursor: pointer; line-height: 1;">√ó</button>
            <h2 style="margin-bottom: 24px; color: var(--neon-green);">Terms of Use</h2>
            <div style="color: var(--text-muted); line-height: 1.8;">
                <p><strong>Last Updated:</strong> 2024</p>
                <p><strong>Use of Tool:</strong> UnFee'd is provided as-is for informational purposes. While we strive for accuracy, platform fees may change, and we cannot guarantee 100% accuracy of all calculations.</p>
                <p><strong>No Financial Advice:</strong> This tool is for informational purposes only and does not constitute financial, legal, or business advice. Always verify pricing directly with platforms before making decisions.</p>
                <p><strong>Affiliate Links:</strong> Some recommended platforms may include affiliate links. We may earn a commission if you sign up through our links, but this doesn't affect our recommendations.</p>
                <p><strong>Platform Accuracy:</strong> We update pricing regularly, but platforms may change fees without notice. Always check official platform pricing for the most current rates.</p>
                <p><strong>Limitation of Liability:</strong> UnFee'd is not responsible for any decisions made based on calculations from this tool. Use at your own discretion.</p>
            </div>
        </div>
    </div>

    <script>
        // Platform fee data - embedded directly to avoid CORS issues
        const platformFees = {
            gumroad: {
                name: 'Gumroad',
                percentage: 10,
                fixed: 0.50,
                processingFee: 2.9,
                processingFixed: 0.30
            },
            kajabi: {
                name: 'Kajabi',
                tiers: [
                    { name: 'Basic', monthly: 149 },
                    { name: 'Growth', monthly: 199 },
                    { name: 'Pro', monthly: 399 }
                ],
                defaultTier: 'Basic',
                processingFee: 2.9,
                processingFixed: 0.30
            },
            patreon: {
                name: 'Patreon',
                percentage: 10,
                processingFee: 2.9,
                processingFixed: 0.30
            },
            teachable: {
                name: 'Teachable',
                tiers: [
                    { name: 'Basic', monthly: 39, percentage: 5 },
                    { name: 'Pro', monthly: 119, percentage: 0 }
                ],
                defaultTier: 'Basic',
                processingFee: 2.9,
                processingFixed: 0.30
            },
            whop: {
                name: 'Whop',
                percentage: 3,
                marketplace: 30,
                processingFee: 2.9,
                processingFixed: 0.30
            },
            stripe: {
                name: 'Stripe Only',
                processingFee: 2.9,
                processingFixed: 0.30
            },
            substack: {
                name: 'Substack',
                percentage: 10,
                processingFee: 2.9,
                processingFixed: 0.30
            },
            podia: {
                name: 'Podia',
                tiers: [
                    { name: 'Mover', monthly: 39 },
                    { name: 'Shaker', monthly: 89 }
                ],
                defaultTier: 'Mover',
                processingFee: 2.9,
                processingFixed: 0.30
            },
            convertkit: {
                name: 'ConvertKit / Kit',
                tiers: [
                    { name: 'Creator', monthly: 29 },
                    { name: 'Creator Pro', monthly: 59 }
                ],
                defaultTier: 'Creator',
                processingFee: 2.9,
                processingFixed: 0.30
            },
            thinkific: {
                name: 'Thinkific',
                tiers: [
                    { name: 'Basic', monthly: 49 },
                    { name: 'Start', monthly: 99 },
                    { name: 'Grow', monthly: 199 }
                ],
                defaultTier: 'Basic',
                processingFee: 2.9,
                processingFixed: 0.30
            },
            systeme: {
                name: 'Systeme.io',
                tiers: [
                    { name: 'Free', monthly: 0 },
                    { name: 'Startup', monthly: 27 },
                    { name: 'Webinar', monthly: 47 },
                    { name: 'Enterprise', monthly: 97 }
                ],
                defaultTier: 'Free',
                processingFee: 2.9,
                processingFixed: 0.30
            },
            circle: {
                name: 'Circle',
                tiers: [
                    { name: 'Basic', monthly: 39 },
                    { name: 'Professional', monthly: 79 },
                    { name: 'Business', monthly: 219 }
                ],
                defaultTier: 'Basic',
                processingFee: 2.9,
                processingFixed: 0.30
            },
            mightynetworks: {
                name: 'Mighty Networks',
                tiers: [
                    { name: 'Community', monthly: 49 },
                    { name: 'Business', monthly: 119 }
                ],
                defaultTier: 'Community',
                processingFee: 2.9,
                processingFixed: 0.30
            },
            shopify: {
                name: 'Shopify',
                tiers: [
                    { name: 'Basic', monthly: 39 },
                    { name: 'Shopify', monthly: 105 },
                    { name: 'Advanced', monthly: 399 }
                ],
                defaultTier: 'Basic',
                processingFee: 2.9,
                processingFixed: 0.30
            },
            thrivecart: {
                name: 'ThriveCart',
                oneTime: 495,
                processingFee: 2.9,
                processingFixed: 0.30
            },
            beehiiv: {
                name: 'Beehiiv',
                tiers: [
                    { name: 'Launch', monthly: 0 },
                    { name: 'Grow', monthly: 49 },
                    { name: 'Scale', monthly: 99 }
                ],
                defaultTier: 'Launch',
                processingFee: 2.9,
                processingFixed: 0.30
            }
        };

        // Alternative recommendations
        const alternatives = [
            {
                name: 'ThriveCart',
                fee: 'One-time $495',
                annual: 0,
                savings: true,
                description: 'Lifetime deal - pay once, use forever. Perfect for course creators who want to own their checkout process.',
                link: 'https://thrivecart.com'
            },
            {
                name: 'Podia',
                fee: '$39/mo',
                annual: 468,
                description: 'All-in-one platform with 0% transaction fees. Includes courses, digital downloads, email marketing, and website builder.',
                link: 'https://podia.com'
            },
            {
                name: 'ConvertKit',
                fee: '$29/mo',
                annual: 348,
                description: 'Email-first creator platform with built-in commerce. Sell digital products with no transaction fees.',
                link: 'https://convertkit.com'
            },
            {
                name: 'Systeme.io',
                fee: 'Free - $97/mo',
                annual: 0,
                description: 'All-in-one marketing platform with courses, funnels, email. Free tier available, no transaction fees on paid plans.',
                link: 'https://systeme.io'
            },
            {
                name: 'Thinkific',
                fee: '$49/mo',
                annual: 588,
                description: 'Course creation platform with 0% transaction fees on all paid plans. Great for course creators.',
                link: 'https://thinkific.com'
            },
            {
                name: 'Circle',
                fee: '$39/mo',
                annual: 468,
                description: 'Community platform with 0% transaction fees. Perfect for building engaged communities around your content.',
                link: 'https://circle.so'
            }
        ];
    </script>
    <script>
        // Calculator logic - embedded to avoid CORS issues
        let feeChartInstance = null;

        // Average transaction values by platform type (in dollars)
        const PLATFORM_AVG_TRANSACTION = {
            // Digital products platforms
            gumroad: 50,
            stripe: 75,
            thrivecart: 100,
            
            // Course platforms (higher ticket)
            kajabi: 150,
            teachable: 120,
            thinkific: 130,
            podia: 100,
            systeme: 90,
            
            // Membership/subscription platforms (lower ticket, recurring)
            patreon: 15,
            substack: 10,
            circle: 25,
            mightynetworks: 30,
            beehiiv: 12,
            
            // Community/marketplace
            whop: 40,
            
            // E-commerce
            shopify: 80,
            
            // Email/creator tools
            convertkit: 60
        };
        
        // Calculate average transaction value based on selected platforms
        function calculateAverageTransaction(platforms) {
            if (platforms.length === 0) return 50; // Default fallback
            
            // Get average transaction values for selected platforms
            const values = platforms
                .map(p => PLATFORM_AVG_TRANSACTION[p.id])
                .filter(v => v !== undefined);
            
            if (values.length === 0) return 50; // Default if no matches
            
            // Use weighted average (or simple average)
            const sum = values.reduce((a, b) => a + b, 0);
            return Math.round(sum / values.length);
        }

        // Update the average transaction input field based on selected platforms
        function updateAverageTransaction() {
            const avgOrderValueInput = document.getElementById('avgOrderValue');
            if (!avgOrderValueInput) return;
            
            // Only update if user hasn't manually edited it
            // Check if the current value matches a calculated value (user hasn't changed it)
            const selectedPlatforms = getSelectedPlatforms();
            const calculatedValue = calculateAverageTransaction(selectedPlatforms);
            
            // If field is empty or matches a previous calculated value, update it
            const currentValue = parseFloat(avgOrderValueInput.value);
            if (!avgOrderValueInput.value || currentValue === calculatedValue || isNaN(currentValue)) {
                avgOrderValueInput.value = calculatedValue;
            }
        }

        // Initialize calculator when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializeCalculator();
            initializeEmailForm();
            initializeFAQ();
        });

        function initializeCalculator() {
            const form = document.getElementById('feeCalculator');
            if (!form) return;

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const revenue = parseFloat(document.getElementById('monthlyRevenue').value);
                const selectedPlatforms = getSelectedPlatforms();
                const submitButton = form.querySelector('button[type="submit"]');
                
                if (selectedPlatforms.length === 0) {
                    alert('Please select at least one platform');
                    return;
                }

                if (isNaN(revenue) || revenue <= 0) {
                    alert('Please enter a valid monthly revenue amount');
                    return;
                }

                // Show loading state
                submitButton.disabled = true;
                submitButton.innerHTML = '<span style="display: inline-block; animation: spin 1s linear infinite;">‚è≥</span> Calculating...';
                
                // Simulate slight delay for better UX (calculations are instant, but this feels better)
                setTimeout(() => {
                    calculateFees(revenue, selectedPlatforms);
                    submitButton.disabled = false;
                    submitButton.innerHTML = 'Find My Freedom Number';
                }, 300);
            });
        }

        function getSelectedPlatforms() {
            const selected = [];
            document.querySelectorAll('.platform-option input[type="checkbox"]:checked').forEach(checkbox => {
                selected.push({
                    id: checkbox.value,
                    tier: getSelectedTier(checkbox.value)
                });
            });
            return selected;
        }

        function getSelectedTier(platformId) {
            const tierSelector = document.querySelector(`select[data-platform="${platformId}"]`);
            return tierSelector ? tierSelector.value : null;
        }

        function calculateFees(revenue, platforms) {
            let totalAnnualFees = 0;
            const feeBreakdown = [];
            
            // Get average transaction value - use user input if provided, otherwise auto-calculate
            const avgOrderValueInput = document.getElementById('avgOrderValue');
            let avgOrderValue;
            
            if (avgOrderValueInput && avgOrderValueInput.value && parseFloat(avgOrderValueInput.value) > 0) {
                // User has entered a value, use it
                avgOrderValue = parseFloat(avgOrderValueInput.value);
            } else {
                // Auto-calculate based on selected platforms
                avgOrderValue = calculateAverageTransaction(platforms);
                // Update the input field with the calculated value
                if (avgOrderValueInput) {
                    avgOrderValueInput.value = Math.round(avgOrderValue);
                }
            }
            
            const estimatedTransactions = revenue / avgOrderValue;

            platforms.forEach(platform => {
                const platformData = platformFees[platform.id];
                if (!platformData) return;

                let tierData = null;
                if (platformData.tiers && platform.tier) {
                    tierData = platformData.tiers.find(t => t.name === platform.tier);
                } else if (platformData.tiers && platformData.defaultTier) {
                    tierData = platformData.tiers.find(t => t.name === platformData.defaultTier);
                }

                let monthlyFee = 0;

                if (tierData && tierData.percentage !== undefined) {
                    monthlyFee += (revenue * tierData.percentage) / 100;
                } else if (platformData.percentage) {
                    monthlyFee += (revenue * platformData.percentage) / 100;
                }

                if (platformData.fixed) {
                    monthlyFee += estimatedTransactions * platformData.fixed;
                }

                if (tierData && tierData.monthly !== undefined) {
                    monthlyFee += tierData.monthly;
                } else if (platformData.monthly) {
                    monthlyFee += platformData.monthly;
                }

                if (platformData.oneTime) {
                    monthlyFee += platformData.oneTime / 12;
                }

                const processingFee = platformData.processingFee || 2.9;
                const processingFixed = platformData.processingFixed || 0.30;
                const processingFees = (revenue * processingFee / 100) + (estimatedTransactions * processingFixed);
                monthlyFee += processingFees;

                const annualFee = monthlyFee * 12;
                totalAnnualFees += annualFee;

                const platformName = tierData 
                    ? `${platformData.name} (${tierData.name})` 
                    : platformData.name;

                feeBreakdown.push({
                    name: platformName,
                    monthly: monthlyFee,
                    annual: annualFee,
                    platform: platformData.name,
                    tier: tierData ? tierData.name : null
                });
            });

            displayResults(totalAnnualFees, feeBreakdown, revenue);
        }

        function displayResults(totalFees, breakdown, revenue) {
            const totalMonthlyFees = breakdown.reduce((sum, item) => sum + item.monthly, 0);
            
            document.getElementById('lossAmount').textContent = '$' + Math.round(totalFees).toLocaleString();
            
            const breakdownHtml = breakdown.map(item => `
                <div class="fee-item">
                    <span class="fee-platform">${item.name}</span>
                    <span class="fee-amount">
                        $${Math.round(item.monthly).toLocaleString()}/mo
                        <span style="color: var(--text-muted); margin-left: 8px;">
                            ($${Math.round(item.annual).toLocaleString()}/yr)
                        </span>
                    </span>
                </div>
            `).join('');
            
            const totalRow = `
                <div class="fee-item" style="border-top: 2px solid var(--neon-green); margin-top: 16px; padding-top: 20px;">
                    <span class="fee-platform" style="font-weight: 800; font-size: 18px;">Total</span>
                    <span class="fee-amount" style="font-weight: 800; font-size: 18px;">
                        $${Math.round(totalMonthlyFees).toLocaleString()}/mo
                        <span style="color: var(--neon-pink); margin-left: 8px;">
                            ($${Math.round(totalFees).toLocaleString()}/yr)
                        </span>
                    </span>
                </div>
            `;
            
            document.getElementById('feeBreakdown').innerHTML = breakdownHtml + totalRow;

            renderFeeChart(breakdown, totalFees);

            const recommendationsHtml = alternatives.map(alt => {
                const savings = totalFees - alt.annual;
                return `
                    <div class="recommendation-card">
                        <div class="rec-header">
                            <div class="rec-name">${alt.name}</div>
                            ${savings > 0 ? `<div class="savings-badge">Save $${Math.round(savings).toLocaleString()}/yr</div>` : ''}
                        </div>
                        <div class="rec-details">
                            <strong>Pricing:</strong> ${alt.fee}<br>
                            ${alt.description}
                        </div>
                        <a href="${alt.link}" target="_blank" rel="noopener" class="rec-link">Learn More ‚Üí</a>
                    </div>
                `;
            }).join('');

            document.getElementById('recommendations').innerHTML = recommendationsHtml;

            document.getElementById('results').classList.add('active');
            document.getElementById('shareActions').style.display = 'flex';
            document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Share and PDF functions
        function shareToTwitter() {
            const lossAmount = document.getElementById('lossAmount').textContent;
            const text = `I'm losing ${lossAmount} per year to platform fees! üí∏ Check out UnFee'd to see how much you're losing: `;
            const url = window.location.href.split('?')[0]; // Get base URL
            const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
            window.open(twitterUrl, '_blank', 'width=550,height=420');
        }

        function shareToLinkedIn() {
            const url = window.location.href.split('?')[0];
            const linkedInUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`;
            window.open(linkedInUrl, '_blank', 'width=550,height=420');
        }

        function downloadPDF() {
            // Store current results data for PDF
            const lossAmount = document.getElementById('lossAmount').textContent;
            const breakdown = document.getElementById('feeBreakdown').innerHTML;
            const revenue = document.getElementById('monthlyRevenue').value;
            const selectedPlatforms = Array.from(document.querySelectorAll('.platform-option input[type="checkbox"]:checked'))
                .map(cb => {
                    const label = document.querySelector(`label[for="${cb.id}"]`);
                    return label ? label.textContent : cb.value;
                }).join(', ');

            // Create a new window with printable content
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>UnFee'd - Fee Analysis Report</title>
                    <style>
                        body {
                            font-family: 'Arial', sans-serif;
                            padding: 40px;
                            background: #fff;
                            color: #000;
                        }
                        h1 {
                            color: #0a0a0f;
                            border-bottom: 3px solid #00ff88;
                            padding-bottom: 10px;
                        }
                        .header {
                            margin-bottom: 30px;
                        }
                        .loss-amount {
                            font-size: 48px;
                            font-weight: bold;
                            color: #ff0080;
                            margin: 20px 0;
                        }
                        .breakdown {
                            margin: 30px 0;
                            border: 1px solid #ddd;
                            padding: 20px;
                            border-radius: 8px;
                        }
                        .fee-item {
                            display: flex;
                            justify-content: space-between;
                            padding: 10px 0;
                            border-bottom: 1px solid #eee;
                        }
                        .footer {
                            margin-top: 40px;
                            padding-top: 20px;
                            border-top: 2px solid #ddd;
                            color: #666;
                            font-size: 12px;
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>UnFee'd - Platform Fee Analysis</h1>
                        <p><strong>Generated:</strong> ${new Date().toLocaleString()}</p>
                    </div>
                    <div>
                        <h2>Your Results</h2>
                        <div class="loss-amount">${lossAmount}</div>
                        <p>Lost to fees every year</p>
                        <p><strong>Monthly Revenue:</strong> $${parseFloat(revenue).toLocaleString()}</p>
                        <p><strong>Platforms Used:</strong> ${selectedPlatforms || 'None selected'}</p>
                    </div>
                    <div class="breakdown">
                        <h3>Fee Breakdown</h3>
                        ${breakdown.replace(/style="[^"]*"/g, '').replace(/var\([^)]*\)/g, '#000')}
                    </div>
                    <div class="footer">
                        <p>Generated by UnFee'd - Break free from platform fees</p>
                        <p>Visit: ${window.location.href.split('?')[0]}</p>
                    </div>
                </body>
                </html>
            `);
            printWindow.document.close();
            
            // Wait for content to load, then print
            setTimeout(() => {
                printWindow.print();
            }, 250);
        }

        function renderFeeChart(breakdown, totalFees) {
            const ctx = document.getElementById('feeChart');
            if (!ctx) {
                console.warn('Chart canvas not found');
                return;
            }

            if (typeof Chart === 'undefined') {
                console.error('Chart.js is not loaded');
                return;
            }

            if (feeChartInstance) {
                feeChartInstance.destroy();
            }

            const labels = breakdown.map(item => item.name);
            const data = breakdown.map(item => Math.round(item.annual));

            const colors = breakdown.map((item, index) => {
                const ratio = index / breakdown.length;
                if (ratio < 0.5) {
                    return `rgba(0, 255, 136, ${0.7 + ratio * 0.3})`;
                } else {
                    return `rgba(255, 0, 128, ${0.4 + (ratio - 0.5) * 0.6})`;
                }
            });

            feeChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Annual Fees ($)',
                        data: data,
                        backgroundColor: colors,
                        borderColor: breakdown.map((item, index) => {
                            const ratio = index / breakdown.length;
                            return ratio < 0.5 ? '#00ff88' : '#ff0080';
                        }),
                        borderWidth: 2,
                        borderRadius: 8,
                        borderSkipped: false,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(21, 21, 32, 0.95)',
                            titleColor: '#ffffff',
                            bodyColor: '#00ff88',
                            borderColor: '#00ff88',
                            borderWidth: 1,
                            padding: 12,
                            displayColors: false,
                            callbacks: {
                                label: function(context) {
                                    const value = context.parsed.y;
                                    const monthly = Math.round(value / 12);
                                    return `$${value.toLocaleString()}/year ($${monthly.toLocaleString()}/month)`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#8888aa',
                                font: {
                                    family: 'Space Mono',
                                    size: 12
                                },
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            },
                            grid: {
                                color: 'rgba(42, 42, 63, 0.5)',
                                drawBorder: false
                            }
                        },
                        x: {
                            ticks: {
                                color: '#ffffff',
                                font: {
                                    family: 'Outfit',
                                    size: 12,
                                    weight: 600
                                },
                                maxRotation: 45,
                                minRotation: 45
                            },
                            grid: {
                                display: false
                            }
                        }
                    },
                    animation: {
                        duration: 1000,
                        easing: 'easeOutQuart'
                    }
                }
            });
        }

        function initializeFAQ() {
            const faqQuestions = document.querySelectorAll('.faq-question');
            faqQuestions.forEach(question => {
                question.addEventListener('click', function() {
                    const faqItem = this.closest('.faq-item');
                    const isActive = faqItem.classList.contains('active');
                    
                    // Close all FAQ items
                    document.querySelectorAll('.faq-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    
                    // Toggle current item
                    if (!isActive) {
                        faqItem.classList.add('active');
                    }
                });
            });
        }

        function showPrivacyPolicy() {
            document.getElementById('privacyModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function showTerms() {
            document.getElementById('termsModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            const privacyModal = document.getElementById('privacyModal');
            const termsModal = document.getElementById('termsModal');
            
            if (event.target === privacyModal) {
                closeModal('privacyModal');
            }
            if (event.target === termsModal) {
                closeModal('termsModal');
            }
        });

        function initializeEmailForm() {
            const emailForm = document.getElementById('emailForm');
            if (!emailForm) return;

            emailForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                const email = document.getElementById('subscriberEmail').value;
                const submitButton = document.getElementById('submitEmail');
                const submitText = document.getElementById('submitText');
                const submitSpinner = document.getElementById('submitSpinner');
                const messageDiv = document.getElementById('emailMessage');

                // Disable button and show spinner
                submitButton.disabled = true;
                submitText.style.display = 'none';
                submitSpinner.style.display = 'inline';

                // Get results data for email
                const lossAmount = document.getElementById('lossAmount').textContent;
                const revenue = document.getElementById('monthlyRevenue').value;
                const selectedPlatforms = Array.from(document.querySelectorAll('.platform-option input[type="checkbox"]:checked'))
                    .map(cb => {
                        const label = document.querySelector(`label[for="${cb.id}"]`);
                        return label ? label.textContent : cb.value;
                    }).join(', ');

                try {
                    // Call serverless function (or direct API if configured)
                    const response = await subscribeToBeehiiv(email, {
                        lossAmount,
                        revenue,
                        platforms: selectedPlatforms
                    });

                    if (response.success) {
                        messageDiv.style.display = 'block';
                        messageDiv.style.color = 'var(--neon-green)';
                        messageDiv.innerHTML = '‚úÖ Success! You\'ve been added to our list. Check your email for your welcome message and lead magnet!';
                        emailForm.reset();
                    } else {
                        throw new Error(response.error || 'Failed to subscribe');
                    }
                } catch (error) {
                    messageDiv.style.display = 'block';
                    messageDiv.style.color = 'var(--neon-pink)';
                    messageDiv.innerHTML = `‚ùå Error: ${error.message || 'Failed to subscribe. Please try again.'}`;
                    console.error('Email subscription error:', error);
                } finally {
                    // Re-enable button
                    submitButton.disabled = false;
                    submitText.style.display = 'inline';
                    submitSpinner.style.display = 'none';
                }
            });
        }

        async function subscribeToBeehiiv(email, data) {
            // Configuration - you'll need to set these
            // Option 1: Use serverless function (recommended for production)
            const SERVERLESS_FUNCTION_URL = window.BEEHIIV_FUNCTION_URL || '/api/subscribe';
            
            // Option 2: Direct API call (requires API key in environment)
            // This should only be used if you have a backend/serverless function
            
            try {
                const response = await fetch(SERVERLESS_FUNCTION_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        email: email,
                        data: data
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || 'Subscription failed');
                }

                return await response.json();
            } catch (error) {
                // Fallback: If serverless function doesn't exist, show helpful message
                if (error.message.includes('Failed to fetch') || error.message.includes('404')) {
                    throw new Error('Serverless function not configured. See setup instructions in the code.');
                }
                throw error;
            }
        }
    </script>
    <script>
        // Generate platform checkboxes dynamically
        document.addEventListener('DOMContentLoaded', function() {
            // Check if platformFees is loaded
            if (typeof platformFees === 'undefined') {
                console.error('platformFees is not defined.');
                document.getElementById('platformGrid').innerHTML = '<p style="color: red;">Error: Platform data failed to load.</p>';
                return;
            }
            
            const platformGrid = document.getElementById('platformGrid');
            if (!platformGrid) {
                console.error('platformGrid element not found');
                return;
            }
            
            const platformOrder = [
                'gumroad', 'kajabi', 'patreon', 'teachable', 'whop', 'stripe',
                'substack', 'podia', 'convertkit', 'thinkific', 'systeme',
                'circle', 'mightynetworks', 'shopify', 'thrivecart', 'beehiiv'
            ];

            platformOrder.forEach(platformId => {
                const platform = platformFees[platformId];
                if (!platform) return;

                const optionDiv = document.createElement('div');
                optionDiv.className = 'platform-option';

                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = platformId;
                checkbox.value = platformId;

                const label = document.createElement('label');
                label.htmlFor = platformId;
                label.className = 'platform-label';
                label.textContent = platform.name;

                optionDiv.appendChild(checkbox);
                optionDiv.appendChild(label);

                // Add tier selector if platform has tiers (initially hidden)
                if (platform.tiers && platform.tiers.length > 1) {
                    const tierSelect = document.createElement('select');
                    tierSelect.setAttribute('data-platform', platformId);
                    tierSelect.className = 'tier-selector';
                    tierSelect.style.marginTop = '8px';
                    tierSelect.style.width = '100%';
                    tierSelect.style.display = 'none'; // Hidden until platform is checked
                    
                    platform.tiers.forEach(tier => {
                        const option = document.createElement('option');
                        option.value = tier.name;
                        option.textContent = tier.name;
                        if (tier.name === platform.defaultTier) {
                            option.selected = true;
                        }
                        tierSelect.appendChild(option);
                    });

                    optionDiv.appendChild(tierSelect);
                    
                    // Show/hide tier selector when checkbox is toggled
                    checkbox.addEventListener('change', function() {
                        tierSelect.style.display = this.checked ? 'block' : 'none';
                        updateAverageTransaction();
                    });
                }

                // Update average transaction when platform is selected/deselected
                checkbox.addEventListener('change', function() {
                    updateAverageTransaction();
                });

                platformGrid.appendChild(optionDiv);
            });
        });
    </script>
</body>
</html>
